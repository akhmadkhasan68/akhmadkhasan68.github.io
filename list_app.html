<!DOCTYPE html>
<html>
<head>
	<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
	<meta name="description" content="Akhmad Khasan Abdullah Personal Profile"/>
    <meta name="robots" content="noodp"/>
    <meta name="keywords" content="Akhmad Khasan Abdullah Profile"/> 
    <meta name="author" content="Akhmad Khasan Abdullah">
    <meta charset="UTF-8">
    <meta content="<?= site_url() ?>" name="url" />
	<title>Akhmad Khasan Abdullah | Blog</title>
	<link rel="stylesheet" type="text/css" href="assets/css/style.css">
	<script src="https://kit.fontawesome.com/06e0fcae35.js" crossorigin="anonymous"></script>
</head>
<body>
	<div class="nav">
	    <div class="logo">
	        <a href="#" style="text-decoration: none;">
	        	<img src="https://avatars.githubusercontent.com/u/41146877?v=4" class="img-circle" alt="logo">
	        	<span class="logo-text">Hello World!</span>
	        </a>
	    </div>
		<div class="navbar" style="margin-left: 100px;">
			<div class="icon-bar" onclick="Show()">
			    <i class="fa fa-bars" class="text-black"></i>
			</div>
			<ul id="nav-lists">
			    <li class="close"><span onclick="Hide()" class="fa fa-times"></span></li>
			    <li><a href="index.html">Home</a></li>
			    <li><a href="profile.html">Profile</a></li>
			    <li><a href="list_app.html" class="active">List App</a></li>
			</ul>
		</div>
	</div>

	<div class="container">
		<div class="row">
			<div class="col-12">
				<div class="card">
					<div class="card-body">
						<div class="row">
							<div class="col-11">
								<span class="h3 text-primary">List App</span>
							</div>
							<div class="col-1">
								<button class="btn btn-primary btn-block" onclick="switchMode()"><i id="btn-mode" class="fa fa-moon"></i></button>
							</div>
						</div>
					</div>
				</div>
			</div>
		</div>
        <div class="row justify-content-center">
			<div class="col-6">
				<div class="card">
                    <div class="card-heading">
                        <i class="fa fa-sticky-note text-primary"></i> &nbsp; <span class="h5">Hi, <span class="text-primary">Akhmad Khasan Abdullah</span> Create Your List Here</span>
                    </div>
					<div class="card-body">
						<div class="row">
							<div class="col-10">
                                <input type="text" class="form-control" placeholder="Insert Your Todo List" name="ListItem"/>
							</div>
                            <div class="col-2">
                                <button id="button" class="btn btn-primary btn-block" disabled>Add</button>
                            </div>
						</div>
					</div>
				</div>
			</div>
		</div>
		<div class="row justify-content-center">
			<div class="col-6">
				<div class="card">
                    <div class="card-heading">
                        <span class="h5">Your List</span>
                    </div>
                    <ul class="listgroup-container">
						<!-- <li class="listgroup-items">					
                            <span class="title-head text-default">Udah Kenal dengan GIT?</span>
                            <br>
                            <span class="subtitle text-muted"><i class="fa fa-clock"></i> 2 bulan lalu</span>
						</li> -->
				 	</ul>
                    <!-- <ol></ol> -->
				</div>
			</div>
		</div>
	</div>

	<div class="footer">
	  <p>&#169; <span class="text-primary">Akhmad Khasan Abdullah</span> <span id="year"></span></p>
	</div>

	<script type="text/javascript" src="assets/js/app.js"></script>
    <script src="https://code.jquery.com/jquery-1.12.4.js" integrity="sha256-Qw82+bXyGq6MydymqBxNPYTaUXXq7c8v3CwiYwLLNXU=" crossorigin="anonymous"></script>
    <script>
        $(document).ready(function(){
			var listData = [];
			var storedNames = JSON.parse(localStorage.getItem("listData")) ?? [];
			if(storedNames.length > 0){
				$('ul.listgroup-container').append(storedNames);
			}

			console.log($('input[name=ListItem]').val().length);

			$('input[name=ListItem]').on('keyup', function(){
				if($(this).val().length > 0){
					$('#button').prop('disabled', false);
				}
			});

            $('#button').click(function(){
				const monthNames = ["January", "February", "March", "April", "May", "June",
									"July", "August", "September", "October", "November", "December"
									];
                let today = new Date();
                let date = `${today.getDate()} ${monthNames[today.getMonth()+1]} ${today.getFullYear()}`;
                let dateTime = date;

                let toAdd = $('input[name=ListItem]').val();
                let appendData = `
                    <li class="listgroup-items" array-index='${storedNames.length++}'>					
                        <span class="title-head text-default">${toAdd}</span>
                        <br>
                        <span class="subtitle text-muted"><i class="fa fa-clock"></i> ${dateTime}</span>
                    </li>
                `;

				saveToLocal(appendData);

                $('ul.listgroup-container').append(appendData);
                $("input[name=ListItem]").val('');
            });

			saveToLocal = (appendData) => {
				listData.push(appendData);

				localStorage.setItem('listData', JSON.stringify(listData));
			};
        
            $("input[name=ListItem]").keyup(function(event){
                if(event.keyCode == 13){
                    $("#button").click();
                }         
            });
        
            $(document).on('dblclick','li', function(){
				let index = $(this).attr('array-index');
                $(this).toggleClass('strike').fadeOut('slow');    
				console.log(index);
				console.log('index '+deleteLocal(index));
            });

			deleteLocal = (index) => {
				let storedNames = JSON.parse(localStorage.getItem("listData"));
				storedNames

				return index;
				localStorage.setItem('listData', JSON.stringify(storedNames));
			};
        });
		
    </script>
</body>
</html>